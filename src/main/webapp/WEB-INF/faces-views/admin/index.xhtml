<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<ui:composition template="/applayout/pageTemplate.xhtml" xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:b="http://bootsfaces.net/ui"
                xmlns:ui="http://java.sun.com/jsf/facelets">

    <ui:composition template="/applayout/pageTemplate.xhtml">
        <ui:define name="content">
            <h:body style="padding-top: 40px; background-color: #blue;">
                <b:container>

        <h:form>

            <b:button  iconAwesome="user-plus" name = "add" value="Add New User"  onclick="$('.modalPseudoClass2').modal()" size="md"/>


        </h:form>


                    <h:form id="myFormID">
                        <b:modal id="amodal2" title="Enter Information" styleClass="modalPseudoClass2"
                                 closable="false"  close-on-escape="false" backdrop="false">


                            <b:inputText required="true" id = "first_name" value = "#{userBean.first}" label="First Name" />
                            <b:inputText required="true" id = "last_last" value = "#{userBean.last}" label="Last Name" />
                            <b:inputText required="true" id = "email" value = "#{userBean.email}" label="User Name" />
                            <b:inputText required="true" id = "password" value = "#{userBean.password}" label="Password" />
                            <b:inputText required="true" id = "flagID" value = "#{userBean.flagID}" label="Flag (1-4)" />
                            <b:inputText required="true" id = "lastUpdated" value = "#{userBean.lastUpdatedBy}" label="Last Updated By" />

                            <b:commandButton value="Create" update="@(.editableCarTable)"
                                             action="#{userBean.saveStudentDetails(userBean)}"
                                             onclick = "/index.xhtml?faces-redirect=true"
                                             outcome="/admin/index"
                                             class="btn btn-success btnWidth">
                            </b:commandButton>

                            <f:facet name="footer">
                                <b:button value="Close" dismiss="modal" />
                                <b:button value="Ok" look="primary" dismiss="modal" />
                            </f:facet>
                        </b:modal>
                    </h:form>

                    <h:form id="myFormID2">
                        <b:modal id="amodal2" title="Update Information" styleClass="modalPseudoClass3"
                                 closable="false"  close-on-escape="false" backdrop="false">


                            <b:inputText required="true" id = "first_name" value = "#{userBean.first}" label="First Name" />
                            <b:inputText required="true" id = "last_name" value = "#{userBean.last}" label="Last Name" />
                            <b:inputText required="true" id = "email" value = "#{userBean.email}" label="Email" />
                            <b:inputText required="true" id = "password" value = "#{userBean.password}" label="Password" />
                            <b:inputText required="true" id = "flagID" value = "#{userBean.flagID}" label="Flag (1-4)" />
                            <b:inputText required="true" id = "lastUpdated" value = "#{userBean.lastUpdatedBy}" label="Last Updated By" />

                            <b:commandButton value="Update" update="@(.editableCarTable)"
                                             action="#{userBean.updateUser(userBean)}"
                                             onclick = "/index.xhtml?faces-redirect=true"
                                             outcome="/admin/index"
                                             class="btn btn-success btnWidth">
                            </b:commandButton>

                            <f:facet name="footer">
                                <b:button value="Close" dismiss="modal" />
                                <b:button value="Ok" look="primary" dismiss="modal" />
                            </f:facet>
                        </b:modal>
                    </h:form>








                    <h:form>



                        <b:dataTable value="#{userBean.userList()}" var="u" class="editableCarTable" responsive="true">
                            <b:dataTableColumn style="text-align: center" value="#{u.first}" label = "First Name" />
                            <b:dataTableColumn style="text-align: center" value="#{u.last}" label = "Last Name"/>
                            <b:dataTableColumn style="text-align: center" value="#{u.email}" label = "Email" />
                            <b:dataTableColumn style="text-align: center" value="#{u.password}" label = "Password"/>
                            <b:dataTableColumn style="text-align: center" value="#{u.lastUpdatedDate}" label = "Last Updated Date"/>
                            <b:dataTableColumn style="text-align: center" value="#{u.flagID}" label = "Flag ID"/>
                            <b:dataTableColumn style="text-align: center" value="#{u.lastUpdatedBy}" label = "Last Updated By"/>
                            <b:dataTableColumn style="text-align: center" value="#{u.userID}" label = "ID"/>


                            <b:dataTableColumn>
                                <b:button

                                        label = "Edit User" style="text-align: center"
                                        float="center"  size="sm"
                                        onclick="$('.modalPseudoClass3').modal()"
                                        name ="edit" value="edit" icon="edit" ajax="true" update="@(.editableCarTable)" >

                                </b:button>
                            </b:dataTableColumn>
                            <b:dataTableColumn>
                                <b:commandButton label = "Delete User" value="Delete" look="danger" size="sm" ajax ="true"
                                                 float="center"  iconAwesome="trash" update="@(.editableCarTable)"
                                                 action="#{userBean.deleteUserRecord(u.userID)}"
                                                 class="btn btn-success btnWidth">
                                </b:commandButton>
                            </b:dataTableColumn>

                            <b:dataTableColumn>
                                <b:commandButton label = "Deactivate Account" iconAwesome="user-times" name = "deactivate" size="sm"
                                                 float="center"  value="deactivate" look="warning" ajax="true"
                                                 update="@(.editableCarTable)"
                                                 action = "ajax:car.deactivate()">
                                </b:commandButton>

                            </b:dataTableColumn>
                        </b:dataTable>
                    </h:form>



                </b:container>
            </h:body>


        </ui:define>
    </ui:composition>
</ui:composition>
